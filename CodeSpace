pg_dump -h localhost -U hotel_admin hotel_db > backup_$(date +%Y%m%d_%H%M%S).sql
////////////////////////////////////////////////////////////////////////////////////////////
# Navigate to backend and activate virtual environment
cd hotel-management-backend
source venv/bin/activate

# Check current migration status
python manage.py showmigrations

# Create migrations for all apps
python manage.py makemigrations users
python manage.py makemigrations menu
python manage.py makemigrations rooms
python manage.py makemigrations bills
python manage.py makemigrations tables
python manage.py makemigrations inventory
python manage.py makemigrations notifications
python manage.py makemigrations staff

# Create any additional migrations
python manage.py makemigrations

# Show what will be migrated (review this!)
python manage.py migrate --plan

# Apply all migrations
python manage.py migrate

# Check for any issues
python manage.py check

# Collect static files
python manage.py collectstatic --noinput

# Final verification
python manage.py showmigrations
/////////////////////////////////////////////////////
# Check migration conflicts
python manage.py makemigrations --merge

# Or rollback if needed
python manage.py migrate app_name previous_migration_number

# Restore backup if critical issues
psql -h localhost -U hotel_admin hotel_db < backup_filename.sql
