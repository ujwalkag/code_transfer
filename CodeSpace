Select an option: 1
Please enter the default value as valid Python.
The datetime and django.utils.timezone modules are available, so it is possible to provide e.g. timezone.now as a value.
Type 'exit' to exit this prompt
>>> timezone.now()
Migrations for 'staff':
  apps/staff/migrations/0002_attendancerecord_remove_paymentrecord_paid_by_and_more.py
    - Create model AttendanceRecord
    - Remove field paid_by from paymentrecord
    - Remove field staff from paymentrecord
    - Alter unique_together for staffshiftassignment (0 constraint(s))
    - Remove field assigned_by from staffshiftassignment
    - Remove field shift from staffshiftassignment
    - Remove field staff from staffshiftassignment
    - Change Meta options on advancepayment
    - Rename field adjustment_amount_per_day on advancepayment to monthly_deduction
    - Rename field emergency_contact on staffprofile to emergency_contact_phone
    - Remove field adjustment_start_date from advancepayment
    - Remove field advance_date from advancepayment
    - Remove field created_at from advancepayment
    - Remove field total_adjusted from advancepayment
    - Remove field updated_at from advancepayment
    - Remove field aadhar_number from staffprofile
    - Remove field bank_account_number from staffprofile
    - Remove field bank_name from staffprofile
    - Remove field is_active from staffprofile
    - Remove field joining_date from staffprofile
    - Remove field salary_per_day from staffprofile
    - Add field approved_date to advancepayment
    - Add field paid_date to advancepayment
    - Add field remaining_amount to advancepayment
    - Add field request_date to advancepayment
    - Add field base_salary to staffprofile
    - Add field date_of_birth to staffprofile
    - Add field department to staffprofile
    - Add field employment_status to staffprofile
    - Add field full_name to staffprofile
    - Add field hire_date to staffprofile
    - Add field hourly_rate to staffprofile
    - Alter field amount on advancepayment
    - Alter field approved_by on advancepayment
    - Alter field reason on advancepayment
    - Alter field status on advancepayment
    - Alter field emergency_contact_name on staffprofile
    - Alter field employee_id on staffprofile
    - Alter field position on staffprofile
    - Delete model Attendance
    - Delete model PaymentRecord
    - Delete model StaffShift
    - Delete model StaffShiftAssignment
    - Add field staff to attendancerecord
    - Alter unique_together for attendancerecord (1 constraint(s))
No changes detected
Planned operations:
staff.0002_attendancerecord_remove_paymentrecord_paid_by_and_more
    Create model AttendanceRecord
    Remove field paid_by from paymentrecord
    Remove field staff from paymentrecord
    Alter unique_together for staffshiftassignment (0 constraint(s))
    Remove field assigned_by from staffshiftassignment
    Remove field shift from staffshiftassignment
    Remove field staff from staffshiftassignment
    Change Meta options on advancepayment
    Rename field adjustment_amount_per_day on advancepayment to monthly_deduction
    Rename field emergency_contact on staffprofile to emergency_contact_phone
    Remove field adjustment_start_date from advancepayment
    Remove field advance_date from advancepayment
    Remove field created_at from advancepayment
    Remove field total_adjusted from advancepayment
    Remove field updated_at from advancepayment
    Remove field aadhar_number from staffprofile
    Remove field bank_account_number from staffprofile
    Remove field bank_name from staffprofile
    Remove field is_active from staffprofile
    Remove field joining_date from staffprofile
    Remove field salary_per_day from staffprofile
    Add field approved_date to advancepayment
    Add field paid_date to advancepayment
    Add field remaining_amount to advancepayment
    Add field request_date to advancepayment
    Add field base_salary to staffprofile
    Add field date_of_birth to staffprofile
    Add field department to staffprofile
    Add field employment_status to staffprofile
    Add field full_name to staffprofile
    Add field hire_date to staffprofile
    Add field hourly_rate to staffprofile
    Alter field amount on advancepayment
    Alter field approved_by on advancepayment
    Alter field reason on advancepayment
    Alter field status on advancepayment
    Alter field emergency_contact_name on staffprofile
    Alter field employee_id on staffprofile
    Alter field position on staffprofile
    Delete model Attendance
    Delete model PaymentRecord
    Delete model StaffShift
    Delete model StaffShiftAssignment
    Add field staff to attendancerecord
    Alter unique_together for attendancerecord (1 constraint(s))
Operations to perform:
  Apply all migrations: admin, auth, bills, contenttypes, inventory, menu, notifications, rooms, sessions, staff, tables, token_blacklist, users
Running migrations:
  Applying staff.0002_attendancerecord_remove_paymentrecord_paid_by_and_more...Traceback (most recent call last):
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 87, in _execute
    return self.cursor.execute(sql)
psycopg2.errors.DuplicateTable: relation "staff_attendance" already exists


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/hotel-management-backend/manage.py", line 20, in <module>
    main()
  File "/home/ubuntu/hotel-management-backend/manage.py", line 17, in main
    execute_from_command_line(sys.argv)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
    utility.execute()
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/core/management/__init__.py", line 436, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/core/management/base.py", line 412, in run_from_argv
    self.execute(*args, **cmd_options)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/core/management/base.py", line 458, in execute
    output = self.handle(*args, **options)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/core/management/base.py", line 106, in wrapper
    res = handle_func(*args, **kwargs)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/core/management/commands/migrate.py", line 356, in handle
    post_migrate_state = executor.migrate(
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/migrations/executor.py", line 135, in migrate
    state = self._migrate_all_forwards(
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/migrations/executor.py", line 167, in _migrate_all_forwards
    state = self.apply_migration(
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/migrations/executor.py", line 252, in apply_migration
    state = migration.apply(state, schema_editor)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/migrations/migration.py", line 132, in apply
    operation.database_forwards(
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/migrations/operations/models.py", line 96, in database_forwards
    schema_editor.create_model(model)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/base/schema.py", line 451, in create_model
    self.execute(sql, params or None)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute
    return super().execute(sql, params)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/base/schema.py", line 201, in execute
    cursor.execute(sql, params)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 102, in execute
    return super().execute(sql, params)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/ubuntu/hotel-management-backend/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 87, in _execute
    return self.cursor.execute(sql)
django.db.utils.ProgrammingError: relation "staff_attendance" already exists

System check identified no issues (0 silenced).

0 static files copied to '/home/ubuntu/hotel-management-backend/staticfiles', 163 unmodified.
admin
 [X] 0001_initial
 [X] 0002_logentry_remove_auto_add
 [X] 0003_logentry_add_action_flag_choices
auth
 [X] 0001_initial
 [X] 0002_alter_permission_name_max_length
 [X] 0003_alter_user_email_max_length
 [X] 0004_alter_user_username_opts
 [X] 0005_alter_user_last_login_null
 [X] 0006_require_contenttypes_0002
 [X] 0007_alter_validators_add_error_messages
 [X] 0008_alter_user_username_max_length
 [X] 0009_alter_user_last_name_max_length
 [X] 0010_alter_group_name_max_length
 [X] 0011_update_proxy_permissions
 [X] 0012_alter_user_first_name_max_length
bills
 [X] 0001_initial
 [X] 0002_bill_room_billitem_item
 [X] 0003_remove_billitem_item_bill_customer_name_and_more
 [X] 0004_alter_bill_receipt_number
 [X] 0005_bill_payment_method
contenttypes
 [X] 0001_initial
 [X] 0002_remove_content_type_name
inventory
 [X] 0001_initial
menu
 [X] 0001_initial
 [X] 0002_rename_description_menuitem_description_en_and_more
 [X] 0003_rename_name_menucategory_name_en_and_more
notifications
 [X] 0001_initial
rooms
 [X] 0001_initial
 [X] 0002_room_delete_roomservice
 [X] 0003_rename_description_room_description_en_and_more
sessions
 [X] 0001_initial
staff
 [X] 0001_initial
 [ ] 0002_attendancerecord_remove_paymentrecord_paid_by_and_more
tables
 [X] 0001_initial
token_blacklist
 [X] 0001_initial
 [X] 0002_outstandingtoken_jti_hex
 [X] 0003_auto_20171017_2007
 [X] 0004_auto_20171017_2013
 [X] 0005_remove_outstandingtoken_jti
 [X] 0006_auto_20171017_2113
 [X] 0007_auto_20171017_2214
 [X] 0008_migrate_to_bigautofield
 [X] 0010_fix_migrate_to_bigautofield
 [X] 0011_linearizes_history
 [X] 0012_alter_outstandingtoken_user
users
 [X] 0001_initial
 [X] 0002_alter_customuser_options_alter_customuser_managers_and_more
 [X] 0003_customuser_can_access_kitchen_and_more
(venv) ubuntu@hotel-management-server:~/hotel-management-backend$
